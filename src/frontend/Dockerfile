FROM node:alpine

COPY . /app
WORKDIR /app

ARG FRONTEND_FOOTER_DISCORD_LINK
ARG FRONTEND_FOOTER_DONATE_LINK
ARG FRONTEND_FOOTER_TWITTER_LINK
ARG FRONTEND_FOOTER_REDDIT_LINK
ARG FRONTEND_FUNDING_PROGRESS
ARG FRONTEND_FUNDING_PROGRESS_FORMAT

ENV FRONTEND_FOOTER_DISCORD_LINK ${FRONTEND_FOOTER_DISCORD_LINK}
ENV FRONTEND_FOOTER_DONATE_LINK ${FRONTEND_FOOTER_DONATE_LINK}
ENV FRONTEND_FOOTER_TWITTER_LINK ${FRONTEND_FOOTER_TWITTER_LINK}
ENV FRONTEND_FOOTER_REDDIT_LINK ${FRONTEND_FOOTER_REDDIT_LINK}
ENV FRONTEND_FUNDING_PROGRESS ${FRONTEND_FUNDING_PROGRESS}
ENV FRONTEND_FUNDING_PROGRESS_FORMAT ${FRONTEND_FUNDING_PROGRESS_FORMAT}

RUN npm install
RUN npm run build
